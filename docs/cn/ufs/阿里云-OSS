---
布局:全局
标题: 阿里云对象存储服务 Aliyun Object Storage Service
---

本文将介绍如何配置阿里云OSS对象存储 [Aliyun OSS](https://intl.aliyun.com/product/oss)作为Alluxio的UFS（under storage system）

阿里云对象存储服务（OSS：Object Storage Service）是阿里云提供的海量、安全、高可靠的云存储服务。 OSS提供多种存储类型，帮助您有效地降低存储使用成本。 

有关阿里云OSS的更多信息，请阅读其[文档](https://www.alibabacloud.com/help/en/oss/)

## 前提条件

正式配置之前，请先参阅[前提条件]({{ '/en/ufs/Storage-Overview.html#preconditions' | relativize_url }})

准备将 OSS 与 Alluxio 一起使用：
<table class="table table-striped">
    <tr>
        <td markdown="span" style="width:30%">`<OSS_BUCKET>`</td>
        <td markdown="span">[在OSS管理控制台中创建一个新的存储桶](https://www.alibabacloud.com/help/en/oss/getting-started/create-buckets-6#task-2013189){ :target="_blank"} 或使用现有的存储桶</td>
    </tr>
    <tr>
        <td markdown="span" style="width:30%">`<OSS_DIRECTORY>`</td>
        <td markdown="span">您想要在存储桶中使用的目录，可以通过创建新目录或使用现有目录</td>
    </tr>
    <tr>
        <td markdown="span" style="width:30%">`<OSS_ACCESS_KEY_ID>`</td>
        <td markdown="span">ID通常用于标识用户。请参见[如何获取AccessKey对](https://www.alibabacloud.com/help/en/sls/developer-reference/accesskey-pair){:target="_blank"}</td>
    </tr>
    <tr>
        <td markdown="span" style="width:30%">`<OSS_ACCESS_KEY_SECRET>`</td>
        <td markdown="span">Secret 用于验证用户的身份。请参见[如何获取AccessKey对](https://www.alibabacloud.com/help/en/sls/developer-reference/accesskey-pair){:target="_blank"}</td>
    </tr>
    <tr>
        <td markdown="span" style="width:30%">`<OSS_ENDPOINT>`</td>
        <td markdown="span">Endpoints是其他服务用来访问OSS的域名。请参阅[公有云中的区域和OSS Endpoints] (https://www.alibabacloud.com/help/en/oss/user-guide/regions-and-endpoints){:target="_blank"}</td>
    </tr>
</表>

## 基本设置

使用阿里云OSS作为Alluxio根挂载点的UFS，您需要在Alluxio中修改conf/alluxio-site.properties配置参数。如果配置文件不存在，可以从模板中创建配置文件。

````shell
$ cp conf/alluxio-site.properties.template conf/alluxio-site.properties
````
通过修改conf/alluxio-site.properties指定OSS存储桶和目录作为UFS的地址。

例如，如果您想将整个存储桶挂载到Alluxio，底层存储地址配置可以是`oss://alluxio-bucket/`，或者只将“alluxio-bucket”存储桶内的“/alluxio/data”目录映射到Alluxio，底层存储地址配置可以是“oss://alluxio-bucket/alluxio/data”。

````properties
alluxio.dora.client.ufs.root=oss://<OSS_BUCKET>/<OSS_DIRECTORY>
````

通过在conf/alluxio-site.properties中添加以下属性来指定阿里云OSS访问的凭证：

````properties
fs.oss.accessKeyId=<OSS_ACCESS_KEY_ID>
fs.oss.accessKeySecret=<OSS_ACCESS_KEY_SECRET>
fs.oss.endpoint=<OSS_ENDPOINT>
````

## 本地运行 Alluxio，验证阿里云OSS配置正确与否

将 Alluxio 配置到阿里云OSS后，尝试[本地运行 Alluxio]({{ '/en/ufs/Storage-Overview.html#running-alluxio-locally' | relativize_url}}) 确认是否能正常工作。

## 高级设置

### 【实验】OSS分片上传

默认上传方式是一次性从头到尾上传一个文件的完整内容。我们使用分片上传方法将一个文件切分多个部分，每个部分将在一个线程中上传。上传时不会生成任何临时文件。

要启用OSS分片上传，您需要修改conf/alluxio-site.properties以生效：

````属性
alluxio.underfs.oss.multipart.upload.enabled=true
````

您可以在“conf/alluxio-site.properties”中指定其他参数，以便提升上传性能和优化使用体验。

````属性
#分片上传超时参数。
alluxio.underfs.object.store.multipart.upload.timeout
````
````属性
# OSS分片上传的线程池大小。
alluxio.underfs.oss.multipart.upload.threads
````
````属性
# OSS分片上传分段大小。默认分段大小为 64MB。
alluxio.underfs.oss.multipart.upload.partition.size
````

## 由 Alluxio 社区贡献

集成阿里云OSS UFS由 Alluxio 社区贡献和维护。
源代码位于[此处](https://github.com/Alluxio/alluxio/tree/main/dora/underfs/oss){:target="_blank"}。
如果任何内容错误或内容过时,请提交PR以解决问题和内容更新
文档[此处](https://github.com/Alluxio/alluxio/blob/main/docs/en/ufs/Aliyun-OSS.md){:target="_blank"}
